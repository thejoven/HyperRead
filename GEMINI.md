# HyperRead Context Guide

## Project Overview

**HyperRead** is a modern, macOS-style document reader built with Electron, React, and TypeScript. It supports reading Markdown, PDF, and EPUB files with a focus on performance and user experience.

*   **Type:** Desktop Application (Electron)
*   **Primary Languages:** TypeScript, JavaScript
*   **Key Technologies:**
    *   **Frontend:** React 19, Vite 7, Tailwind CSS 4
    *   **Desktop Wrapper:** Electron 38
    *   **Rendering:** `react-markdown` (MD), `pdfjs-dist` (PDF), `epubjs` (EPUB)
    *   **Utilities:** `mermaid` (Diagrams), `katex` (Math), `highlight.js` (Code)

## Architecture

The project follows a standard Electron architecture with a clear separation between the Main Process and the Renderer Process.

### 1. Main Process (`electron/`)
*   **Entry Point:** `electron/main.js`
*   **Responsibilities:**
    *   Creating and managing the application window (`BrowserWindow`).
    *   Handling system-level events (app lifecycle, file associations).
    *   File System operations (reading files, scanning directories) via IPC handlers.
    *   Managing application state (window position/size).
*   **IPC:** Exposes functionality to the renderer via `electron/preload.js` (likely as `window.electronAPI`).

### 2. Renderer Process (`src/`)
*   **Entry Point:** `src/main.tsx` -> `src/electron-app.tsx`
*   **Tech Stack:** React (Vite-powered).
*   **Key Components:**
    *   `ElectronApp`: The root component managing global state (tabs, settings, layout).
    *   `AppToolbar`: Top navigation and control bar.
    *   `FileList`: Sidebar for directory navigation.
    *   `DocumentContent`: The main viewer area, switching between `MarkdownContent`, `PdfViewer`, and `EpubViewer`.
    *   `ConsistentAiSidebar`: AI assistant integration.
*   **State Management:** Heavy use of React Context and Custom Hooks (`hooks/`) for modular state management (e.g., `useTabs`, `useSettings`, `useDirectory`).

## Key Directories

*   `src/`: Frontend source code.
    *   `components/`: Reusable React components.
    *   `hooks/`: Custom React hooks for logic reuse.
    *   `lib/`: Utility functions and services (AI, i18n, shortcuts).
    *   `styles/`: Global styles (Tailwind, macOS-specific tweaks).
    *   `types/`: TypeScript definitions.
*   `electron/`: Backend/System source code.
*   `dist/`: Compiled frontend assets (generated by Vite).
*   `release/`: Packaged application installers (generated by electron-builder).

## Development Workflow

### Prerequisites
*   Node.js (LTS recommended)
*   npm

### Commands
*   **Start Development:**
    ```bash
    npm run start-dev
    ```
    (Runs Vite dev server + Electron in development mode concurrently)

*   **Build Frontend:**
    ```bash
    npm run build
    ```

*   **Package Application:**
    ```bash
    npm run dist      # macOS
    npm run dist-all  # All platforms
    ```

### Conventions
*   **Styling:** Tailwind CSS is the primary styling solution.
*   **Path Aliases:** `@/` resolves to `src/`.
*   **Icons:** Lucide React is used for UI icons.
*   **IPC:** All Node.js/System interactions from the UI *must* go through `window.electronAPI` (defined in preload and handled in main).

## Common Tasks
*   **Adding a specific viewer feature:** Check `src/components/viewers/`.
*   **Modifying window behavior:** Check `electron/main.js`.
*   **Updating shortcuts:** Check `src/lib/shortcuts/`.
